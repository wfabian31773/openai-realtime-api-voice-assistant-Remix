export interface Location {
  name: string;
  address: string;
  city: string;
  state: string;
  zip: string;
  phone: string;
  fax: string;
  hours: string;
}

export const AZUL_VISION_LOCATIONS: Location[] = [
  { name: "Anaheim", address: "947 S. Anaheim Boulevard, Suite #120", city: "Anaheim", state: "CA", zip: "92805", phone: "(714) 991-4100", fax: "(714) 533-6800", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Covina", address: "420 W. Rowland Street", city: "Covina", state: "CA", zip: "91723", phone: "(626) 224-9980", fax: "(626) 470-4550", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Downey", address: "8028 3rd Street", city: "Downey", state: "CA", zip: "90241", phone: "(562) 622-8700", fax: "(562) 622-1800", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Eastvale", address: "12442 Limonite Avenue, Suite #203", city: "Eastvale", state: "CA", zip: "91752", phone: "(951) 821-5188", fax: "(951) 542-1538", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Encinitas", address: "700 Garden View Court, Unit 100", city: "Encinitas", state: "CA", zip: "92024", phone: "(760) 452-4270", fax: "(760) 452-5328", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Glendale", address: "1025 N. Brand Boulevard, Suite #200", city: "Glendale", state: "CA", zip: "91202", phone: "(818) 583-9933", fax: "(818) 583-9935", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Glendora", address: "150 S. Grand Avenue, Suite J", city: "Glendora", state: "CA", zip: "91741", phone: "(626) 335-2114", fax: "(626) 963-6497", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Huntington Beach", address: "7677 Center Avenue, Suite #301", city: "Huntington Beach", state: "CA", zip: "92647", phone: "(714) 901-2007", fax: "(714) 901-2003", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Indio", address: "81767 Doctor Carreon Blvd, Suite #101 (Campus of JFK Hospital)", city: "Indio", state: "CA", zip: "92201", phone: "(760) 396-3600", fax: "(760) 396-5379", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Laguna Hills", address: "23521 Paseo De Valencia, Suite #305", city: "Laguna Hills", state: "CA", zip: "92653", phone: "(949) 581-1770", fax: "(949) 454-2002", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Long Beach", address: "5991 E. Spring Street", city: "Long Beach", state: "CA", zip: "90808", phone: "(562) 938-9945", fax: "(562) 496-0433", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Long Beach Willow", address: "2600 Redondo Avenue, Suite #203", city: "Long Beach", state: "CA", zip: "90806", phone: "(562) 496-3600", fax: "(562) 291-3321", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Los Angeles (DTLA)", address: "1120 W Washington Blvd, 2nd Floor", city: "Los Angeles", state: "CA", zip: "90015", phone: "(213) 789-5030", fax: "(213) 789-5021", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Mission Hills", address: "11550 Indian Hills Road, Suite #341", city: "Mission Hills", state: "CA", zip: "91345", phone: "(818) 365-0606", fax: "(818) 898-0205", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Mission Viejo", address: "26732 Crown Valley Parkway, Suite 361", city: "Mission Viejo", state: "CA", zip: "92691", phone: "(949) 642-3100", fax: "(949) 642-4900", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Monrovia", address: "855 W. Foothill Blvd", city: "Monrovia", state: "CA", zip: "91016", phone: "(626) 358-1080", fax: "(626) 358-0548", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Montebello", address: "229 E. Beverly Blvd", city: "Montebello", state: "CA", zip: "90640", phone: "(562) 354-9522", fax: "(323) 728-5041", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Northridge", address: "18250 Roscoe Blvd., Suite 120", city: "Northridge", state: "CA", zip: "91325", phone: "(818) 583-9924", fax: "(818) 583-9925", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Oceanside", address: "3621 Vista Way", city: "Oceanside", state: "CA", zip: "92056", phone: "(760) 607-3460", fax: "(760) 607-3430", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Palm Desert", address: "73950 Alessandro Dr, Ste 5", city: "Palm Desert", state: "CA", zip: "92260", phone: "(760) 568-3334", fax: "(760) 568-3335", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Pasadena", address: "2619 E. Colorado Boulevard, Suite #150", city: "Pasadena", state: "CA", zip: "91107", phone: "(626) 793-4168", fax: "(626) 793-6256", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Rancho Cucamonga", address: "9170 Haven Avenue, Suite #102", city: "Rancho Cucamonga", state: "CA", zip: "91730", phone: "(909) 440-1014", fax: "(909) 440-1015", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Redlands", address: "1845 W Redlands Blvd, Suite #101", city: "Redlands", state: "CA", zip: "92373", phone: "(909) 363-1450", fax: "(909) 363-1480", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Riverside", address: "4351 Latham St, Suite 101", city: "Riverside", state: "CA", zip: "92501", phone: "(951) 777-2210", fax: "(951) 777-2235", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "San Bernardino", address: "399 E Highland Avenue, Suite #401", city: "San Bernardino", state: "CA", zip: "92404", phone: "(909) 327-3118", fax: "(909) 327-3119", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "San Gabriel", address: "207 S. Santa Anita Street, Suite P25", city: "San Gabriel", state: "CA", zip: "91776", phone: "(626) 200-1277", fax: "(626) 200-1278", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Santa Ana", address: "1595 17th Street", city: "Santa Ana", state: "CA", zip: "92705", phone: "(714) 984-0788", fax: "(714) 808-8950", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Tarzana", address: "18370 Burbank Boulevard, Suite #207", city: "Tarzana", state: "CA", zip: "91356", phone: "(818) 996-3400", fax: "(818) 996-8643", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Torrance", address: "3655 Lomita Boulevard, Suite #410", city: "Torrance", state: "CA", zip: "90505", phone: "(310) 803-9633", fax: "(310) 803-9634", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "Upland", address: "494 N. Mountain Ave", city: "Upland", state: "CA", zip: "91786", phone: "(909) 552-7200", fax: "(909) 552-7342", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
  { name: "West Hills", address: "7301 Medical Center Drive, Suite 301", city: "West Hills", state: "CA", zip: "91307", phone: "(818) 583-9115", fax: "(818) 583-9116", hours: "Mon-Fri 8am-5pm, closed 12pm-1pm" },
];

export const AZUL_VISION_SERVICES = {
  surgical: {
    cataracts: {
      description: "Cataract surgery replaces the cloudy natural lens with an artificial intraocular lens (IOL). Safe, commonly performed outpatient procedure.",
      whatAreCataracts: "Age-related eye condition where the natural lens becomes clouded, causing blurred/distorted vision, difficulty seeing in low light, and increased glare sensitivity.",
      surgeryTypes: [
        "Phacoemulsification - Most common, uses ultrasound to break up lens, quick recovery, minimal sutures",
        "Femtosecond Laser-Assisted (FLACS) - Precision laser technology, for complex or dense cataracts",
        "Manual Extracapsular (ECCE) - For extremely dense or advanced cataracts",
      ],
      lensOptions: [
        "Monofocal IOLs - Standard, typically covered by insurance, single focal point (usually distance)",
        "Multifocal IOLs - Multiple distances, reduces need for glasses, may cause halos in low light",
        "Toric IOLs - Corrects astigmatism, different powers in different meridians",
        "Accommodating IOLs - Dynamic focusing, mimics natural lens movement",
        "Light Adjustable Lens (LAL) - Personalized vision adjustment AFTER surgery using UV light, allows testing and refining",
      ],
      procedure: "Outpatient, 3mm incision, anesthetic eye drops, ultrasonic removal, same-day recovery",
      insuranceNote: "Standard monofocal IOLs usually covered by insurance. Premium lenses have additional out-of-pocket costs. Medical financing available (CareCredit, Alphaeon).",
    },
    lasik: {
      description: "Laser vision correction to reduce or eliminate need for glasses/contacts",
      currentOffer: "$1,500 OFF LASIK with FREE consultation",
      locations: "LASIK machines in Orange County and Riverside (only LASIK machines in Orange County area)",
      experience: "Board-certified surgeons performing LASIK since the procedure's invention (25+ years), thousands of procedures performed",
      consultationProcess: [
        "FREE consultation",
        "Corneal thickness check (too thin = alternative may be recommended)",
        "Overall eye health assessment",
        "Refractive error evaluation (extremely high prescription may not be suitable)",
        "Medical history review",
      ],
      candidacy: "Not suitable for: too thin cornea, eye disease, severe dry eye, extremely high prescription",
      alternatives: "LASEK and other laser vision correction options available if LASIK not suitable",
    },
    pterygium: {
      description: "Pterygium (Surfer's Eye/Farmer's Eye) - noncancerous triangle-shaped growth on eye surface",
      commonNames: ["Surfer's Eye", "Farmer's Eye"],
      cause: "UV light exposure, dust, wind, low-humidity environments",
      symptoms: [
        "Astigmatism (if cornea shape becomes distorted)",
        "Blurry vision (if growth covers pupil)",
        "Foreign body sensation",
        "Redness, burning, or itching",
      ],
      riskFactors: ["Genetics (hereditary)", "Age over 40", "Male gender", "Outdoor activities", "Immune system disorders"],
      prevention: ["UV protection sunglasses", "Wide-brim hats", "Reduce exposure to dusty/windy environments"],
      treatment: [
        "Mild cases: Over-the-counter eye ointments, lubricating drops, prescription medications",
        "Surgical removal with conjunctival tissue grafting to prevent regrowth",
      ],
      consultationPhone: "(760) 299-7277",
    },
  },
  medical: {
    glaucoma: {
      description: "Eye pressure management - NO CURE but controllable with treatment to protect vision",
      firstLineTreatment: ["Medicated eye drops", "Oral medications"],
      migsDescription: "Minimally Invasive Glaucoma Surgery - tiny incision, microscopic tube/shunt/stent to improve fluid drainage. Less risk and faster recovery than traditional surgery.",
      migsOptions: [
        "iStent inject Trabecular Micro-bypass - 2 tiny stents during cataract surgery, placed in trabecular meshwork",
        "XEN Gel Stents - Tiny tube (length of eyelash) creates drainage channel, stays permanently",
        "Hydrus Microstent - Crescent-shaped device (size of eyelash) in natural drainage canal, permanent",
        "OMNI Surgical System - Targets 3 resistance areas (trabecular meshwork, Schlemm's canal, collector channels)",
        "DURYSTA implant - Small implant releases medication, dissolves naturally, works up to 15 weeks",
      ],
      note: "All MIGS treatments are for open-angle glaucoma patients",
    },
    diabeticRetinopathy: {
      description: "Damage to retina caused by diabetes complications, can lead to blindness",
      whoIsAtRisk: "Anyone with Type 1 or Type 2 diabetes. Risk increases with duration and poor blood sugar control.",
      symptoms: [
        "May have no symptoms in early stages",
        "Floaters (spots or dark strings)",
        "Blurred vision",
        "Fluctuating vision",
        "Dark or empty areas in vision",
        "Vision loss",
        "Difficulty with color perception",
      ],
      cause: "Blood sugar fluctuations cause blood vessels in retina to swell, leak fluid, and close. Abnormal fragile blood vessels grow to compensate.",
      screening: "Quick 10-20 minute screening using LumineticsCore (FDA-cleared AI diagnostic tool, formerly IDx-DR) in partnership with Digital Diagnostics",
      selfScheduleUrl: "bit.ly/AzulDRS",
      specialists: ["Dr. Payam Amini", "Dr. Dwayne K. Logan", "Dr. Paymohn Mahdavi", "Dr. Janet Kim"],
    },
    routineExams: "Comprehensive eye exams for all ages",
    retinaDiseases: "Diagnosis and treatment of retinal conditions",
  },
  optical: {
    description: "Full optical department with high-quality designer frames and sunglasses",
    brands: ["Coach", "Nike", "Ray-Ban", "Tom Ford", "Tory Burch", "Guess", "Versace", "Prada"],
    currentOffer: "Buy one pair of glasses, get another 50% off (restrictions may apply)",
    staff: "Team of certified opticians to help find the right frames",
  },
};

export const AZUL_VISION_KNOWLEDGE = {
  practice: {
    name: "Azul Vision",
    tagline: "Comprehensive ophthalmology care in Southern California",
    size: "50+ providers across 31+ locations",
    region: "Southern California",
    website: "azulvision.com",
    yearsInBusiness: "25+ years of LASIK experience since procedure invention",
  },
  
  partnerPractices: [
    "North Valley Eye",
    "Riverside Eye Partners", 
    "Atlantis Eyecare",
    "California Eye Specialists",
    "Pabalan Eye Center",
  ],
  
  scheduling: {
    appointmentRequestUrl: "bit.ly/AzulAppt",
    paymentUrl: "bit.ly/AzulPay",
    drsScreeningUrl: "bit.ly/AzulDRS",
    phreesiaForm: "Available for online appointment requests",
  },
  
  businessHours: {
    standard: "Monday-Friday, 8am-5pm (closed 12pm-1pm for lunch)",
    afterHours: "After-hours calls handled by answering service with next-business-day callback",
    holidays: "Closed on major holidays",
  },

  payment: {
    methods: ["Credit cards", "Online payments via website"],
    financing: [
      "CareCredit - No-interest plans (6, 12, 18, 24 months) or low-interest (36, 48, 60 months). Apply online, in-office, or call 866-834-3207",
      "Alphaeon Credit - Medical financing option",
    ],
    insurance: "Wide range of insurance plans accepted. Insurance experts help maximize benefits. Call to verify coverage before appointment.",
    note: "Standard IOLs typically covered by insurance. Premium lenses and LASIK have out-of-pocket costs.",
  },
  
  partnerships: [
    "YMCA of Los Angeles (Turkey Distribution, community events)",
    "Marshall B. Ketchum University Southern California College of Optometry (Optometry Residency Program)",
    "Digital Diagnostics (LumineticsCore AI diabetic retinopathy screening)",
  ],

  residencyProgram: {
    description: "One-year optometry residency program (two positions) in ocular disease specialty",
    affiliation: "Marshall B. Ketchum University Southern California College of Optometry",
    mission: "Develop advanced competence in diagnosis, treatment, and management of visual system diseases",
  },

  socialMedia: {
    instagram: "@azul.vision",
  },

  communityInvolvement: [
    "YMCA Turkey Giveaway (annual Thanksgiving event)",
    "Free diabetic retinopathy screenings",
  ],
};

export const AZUL_VISION_PROVIDERS = {
  ophthalmologists: [
    {
      name: "Dwayne K. Logan, M.D.",
      title: "Ophthalmologist",
      specialties: ["Cataract Surgery", "LASIK", "Corneal Transplants", "Glaucoma", "Refractive Surgery"],
      education: "M.D. from UCLA/Drew University of Medicine",
      training: "Ophthalmology Residency at Howard University Hospital",
      experience: "20+ years of microsurgical and ophthalmic laser procedures",
      languages: ["English"],
      certifications: ["Board-Certified Ophthalmologist", "American Academy of Ophthalmology", "American Society of Refractive and Cataract Surgery", "Association for Research in Vision and Ophthalmology"],
      locations: ["Orange County", "Los Angeles County", "Huntington Beach"],
      highlights: "Renowned for exceptional surgical skills and innovative techniques",
    },
    {
      name: "Jay Patel, M.D.",
      title: "Ophthalmologist, Medical Director SFV & SGV",
      specialties: ["Cataract Surgery", "LASIK", "Pterygium Surgery", "Corneal & Refractive Surgery"],
      education: "M.D. from Medical University of Lublin (Accelerated 6-Year Program)",
      training: "Chief Resident at Nassau University Medical Center, Fellowship at Pepose Vision Institute/Barnes Jewish Hospital",
      experience: "Volunteer surgical missions in India and Dominican Republic",
      languages: ["English"],
      certifications: ["Board-Certified Ophthalmologist", "Fellow in Cornea and Refractive Surgery"],
      locations: ["Glendale", "Indio", "Monrovia", "Palm Desert", "Pasadena", "Upland"],
      highlights: "Medical Director for San Fernando Valley and San Gabriel Valley regions",
    },
    {
      name: "Daniel Choi, M.D.",
      title: "Ophthalmologist, Corneal & Refractive Specialist",
      specialties: ["Cataract Surgery", "Corneal Surgery", "Refractive Surgery", "YAG Laser"],
      education: "M.D. from University of Pennsylvania School of Medicine, B.S. from Cornell University",
      training: "Residency at Scheie Eye Institute (UPenn), Fellowship at UCLA Jules Stein Eye Institute",
      experience: "Former Federal Reserve economic research assistant before medical career",
      languages: ["English"],
      certifications: ["Fellow in Cornea/External Disease/Refractive Surgery"],
      locations: ["Glendale", "Mission Hills", "Tarzana", "West Hills"],
      highlights: "UCLA-trained corneal specialist with precision surgical techniques",
    },
    {
      name: "Payam Amini, M.D.",
      title: "Ophthalmologist, Vitreo-Retinal Surgeon",
      specialties: ["Retinal Surgery", "Vitreo-Retinal Disease", "Macular Degeneration", "Diabetic Retinopathy", "Retinal Detachment", "Avastin Injections"],
      education: "M.D. from State University of New York Syracuse, B.S. in Neuroscience from UC San Diego",
      training: "Residency and dual Fellowships at Shiley Eye Center, UC San Diego",
      experience: "Principal investigator in dozens of clinical trials, cutting-edge research",
      languages: ["English", "Farsi", "Medical Spanish"],
      certifications: ["Board-Certified by American Board of Ophthalmology (2012)"],
      locations: ["Multiple locations throughout Southern California"],
      highlights: "Leading retina specialist participating in cutting-edge research studies",
    },
    {
      name: "Brittany Powell, M.D., FACS",
      title: "Ophthalmologist, Vitreo-Retinal Surgeon",
      specialties: ["Vitreo-Retinal Surgery", "Ophthalmic Trauma"],
      education: "Medical training at Naval Medical Center San Diego, Fellowship at Mt. Sinai",
      training: "Specialized vitreo-retinal fellowship",
      languages: ["English"],
      certifications: ["Fellow of the American College of Surgeons (FACS)"],
      locations: ["Multiple locations"],
      highlights: "Trauma and vitreo-retinal surgery specialist",
    },
    {
      name: "Brett L. Tompkins, D.O.",
      title: "Ophthalmologist",
      specialties: ["General Ophthalmology"],
      education: "D.O. (Doctor of Osteopathic Medicine)",
      languages: ["English"],
      certifications: ["Board-Certified Ophthalmologist"],
      locations: ["Encinitas", "Oceanside"],
      highlights: "San Diego County ophthalmology services",
    },
  ],
  optometrists: [
    { name: "Nayiri Abnous, O.D.", title: "Optometrist" },
    { name: "Mary Cairnie, O.D.", title: "Optometrist" },
    { name: "David Camara, O.D.", title: "Optometrist" },
    { name: "Claudia Montana-Collins, O.D.", title: "Optometrist" },
    { name: "Matthew L. Diggory, O.D.", title: "Assistant Director of Medical Optometry, Inland Empire" },
    { name: "Anne Grattan, O.D.", title: "Optometrist" },
    { name: "Shabnam Habibi, O.D.", title: "Optometrist" },
    { name: "Anthony Huynh, O.D.", title: "Optometrist" },
    { name: "Huong (Helen) Le, O.D.", title: "Optometrist" },
    { name: "Dana Le, O.D.", title: "Optometrist" },
    { name: "Sharon Lei, O.D.", title: "Optometrist" },
    { name: "Lauren Liang-Chang, O.D.", title: "Optometrist" },
  ],
  leadership: {
    medicalDirectors: [
      "Jay Patel, M.D. - Medical Director, San Fernando Valley & San Gabriel Valley",
    ],
    specialtyDirectors: [
      "Matthew L. Diggory, O.D. - Assistant Director of Medical Optometry, Inland Empire",
    ],
  },
  providerStats: {
    totalProviders: "50+",
    ophthalmologists: "Multiple board-certified surgeons",
    optometrists: "Team of licensed optometrists across all locations",
    specialties: ["Cataract Surgery", "LASIK/Refractive Surgery", "Retina/Vitreoretinal", "Glaucoma", "Cornea", "Pediatric Ophthalmology", "General Ophthalmology", "Optometry"],
  },
};

export const COMMON_QUESTIONS = {
  "hours": "Our offices are open Monday through Friday, 8am to 5pm. We're closed from 12pm to 1pm for lunch.",
  "holiday_hours": "Our offices are closed on major holidays including New Year's Day, Thanksgiving, and Christmas.",
  "appointment": "You can request an appointment online at bit.ly/AzulAppt or call your nearest location directly.",
  "payment": "We accept credit cards and online payments. We also offer financing through CareCredit and Alphaeon Credit for procedures like LASIK and premium lens implants.",
  "insurance": "We accept a wide range of insurance plans. Please call your nearest location to verify your coverage before your appointment.",
  "lasik_cost": "We're currently offering $1,500 OFF LASIK. We offer free consultations - call to schedule.",
  "lasik_consultation": "LASIK consultations are FREE. We'll check your corneal thickness, eye health, and prescription to determine if you're a candidate.",
  "cataract_surgery": "Cataract surgery is an outpatient procedure that takes about 15-30 minutes. Standard lens implants are typically covered by insurance. Premium lenses have additional costs but financing is available.",
  "drs_screening": "Diabetic retinopathy screenings take only 10-20 minutes. You can self-schedule online at bit.ly/AzulDRS.",
  "locations": "We have 31+ locations across Southern California. Use our website to find the location nearest you.",
  "glasses": "Our optical department offers designer frames from brands like Ray-Ban, Prada, Coach, and more. Current offer: Buy one pair, get another 50% off.",
};

export function getCurrentDateTimeContext(): string {
  const now = new Date();
  const options: Intl.DateTimeFormatOptions = {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: 'numeric',
    minute: '2-digit',
    timeZone: 'America/Los_Angeles',
    timeZoneName: 'short',
  };
  const formattedDate = now.toLocaleString('en-US', options);
  
  const hour = now.toLocaleString('en-US', { hour: 'numeric', hour12: false, timeZone: 'America/Los_Angeles' });
  const hourNum = parseInt(hour);
  
  let timeOfDay = 'evening';
  if (hourNum >= 5 && hourNum < 12) timeOfDay = 'morning';
  else if (hourNum >= 12 && hourNum < 17) timeOfDay = 'afternoon';
  else if (hourNum >= 17 && hourNum < 21) timeOfDay = 'evening';
  else timeOfDay = 'night';
  
  return `Current date and time: ${formattedDate}. It is currently ${timeOfDay}.`;
}

export function buildCallerContext(callerPhone?: string): string {
  if (callerPhone) {
    return `The caller's phone number is ${callerPhone}. Use this as the default callback number - only ask for a different number if they prefer to be reached elsewhere.`;
  }
  return `Caller ID is not available. You will need to ask for their callback phone number.`;
}

export function findLocationByCity(cityName: string): Location | undefined {
  const normalized = cityName.toLowerCase().trim();
  return AZUL_VISION_LOCATIONS.find(loc => 
    loc.name.toLowerCase().includes(normalized) || 
    loc.city.toLowerCase().includes(normalized)
  );
}

export function getLocationsList(): string {
  return AZUL_VISION_LOCATIONS.map(loc => loc.name).join(', ');
}

export function buildPracticeKnowledgePrompt(): string {
  return `
AZUL VISION PRACTICE KNOWLEDGE

ABOUT AZUL VISION:
- ${AZUL_VISION_KNOWLEDGE.practice.tagline}
- ${AZUL_VISION_KNOWLEDGE.practice.size} in Southern California
- 25+ years of LASIK experience

BUSINESS HOURS:
- ${AZUL_VISION_KNOWLEDGE.businessHours.standard}
- ${AZUL_VISION_KNOWLEDGE.businessHours.afterHours}
- Closed on major holidays

SERVICES:
- Cataract surgery (outpatient, various lens options)
- LASIK and laser vision correction ($1,500 OFF current offer)
- Pterygium removal (Surfer's Eye)
- Glaucoma treatment (MIGS procedures)
- Diabetic retinopathy screening (10-20 min, AI-powered)
- Routine eye exams
- Full optical department (designer frames, BOGO 50% off)

PAYMENT & INSURANCE:
- Credit cards, online payments accepted
- CareCredit and Alphaeon financing available
- Wide range of insurance plans accepted

ONLINE RESOURCES:
- Request appointment: ${AZUL_VISION_KNOWLEDGE.scheduling.appointmentRequestUrl}
- Make payment: ${AZUL_VISION_KNOWLEDGE.scheduling.paymentUrl}
- Self-schedule DRS screening: ${AZUL_VISION_KNOWLEDGE.scheduling.drsScreeningUrl}

IMPORTANT - OPEN-ENDED QUESTIONS ONLY:
When asking about locations, doctors, appointments, or medications:
- DO NOT offer multiple-choice options
- DO NOT list locations, doctors, or times for the caller to pick from
- ASK open-ended questions and ACCEPT whatever the caller says
- Example: "Which location is your appointment at?" (NOT "Is it at Location A, B, or C?")
- If the caller mentions a location/doctor you don't recognize, just accept it and document it
`;
}

export function buildCompactLocationReference(): string {
  return AZUL_VISION_LOCATIONS.map(loc => 
    `${loc.name}: ${loc.address}, ${loc.city} ${loc.zip} | ${loc.phone}`
  ).join('\n');
}

export function buildServicesReference(): string {
  return `
SERVICES QUICK REFERENCE:

SURGICAL:
- Cataracts: Outpatient surgery, various lens options (Monofocal, Multifocal, Toric, LAL). Standard IOLs covered by insurance.
- LASIK: $1,500 OFF current offer. FREE consultations. 25+ years experience. Machines in Orange County & Riverside.
- Pterygium: Surfer's Eye removal with grafting to prevent regrowth.

MEDICAL:
- Glaucoma: No cure but manageable. Eye drops, oral meds, or MIGS procedures (iStent, XEN, Hydrus, OMNI, DURYSTA).
- Diabetic Retinopathy: Quick 10-20 min AI-powered screening. Self-schedule at bit.ly/AzulDRS.
- Routine exams: Comprehensive eye exams for all ages.

OPTICAL:
- Designer frames: Ray-Ban, Prada, Coach, Nike, Versace, Tom Ford, and more.
- Current offer: Buy one pair, get 50% off second pair.

PAYMENT OPTIONS:
- Credit cards, online payments
- CareCredit: 6-60 month financing, call 866-834-3207
- Alphaeon Credit
- Most insurance plans accepted
`;
}

export function buildProvidersReference(): string {
  const ophthalmologists = AZUL_VISION_PROVIDERS.ophthalmologists.map(doc => 
    `- ${doc.name} (${doc.title}): ${doc.specialties.join(', ')}. Locations: ${doc.locations.join(', ')}`
  ).join('\n');
  
  const optometrists = AZUL_VISION_PROVIDERS.optometrists.map(doc => 
    `- ${doc.name}`
  ).join(', ');
  
  return `
PROVIDERS REFERENCE:

OPHTHALMOLOGISTS (Surgeons):
${ophthalmologists}

OPTOMETRISTS:
${optometrists}

PROVIDER STATS:
- 50+ providers across 31+ locations
- All ophthalmologists are board-certified
- Multiple fellowship-trained specialists (Retina, Cornea, Glaucoma, Refractive)

KEY SPECIALISTS BY SERVICE:
- LASIK/Refractive: Dr. Dwayne K. Logan, Dr. Jay Patel, Dr. Daniel Choi
- Cataracts: Dr. Logan, Dr. Patel, Dr. Choi (all perform cataract surgery)
- Retina/Diabetic Eye Disease: Dr. Payam Amini, Dr. Brittany Powell
- Cornea: Dr. Daniel Choi (UCLA Jules Stein fellowship-trained)
- San Diego County: Dr. Brett L. Tompkins (Encinitas, Oceanside)

NOTE: When caller asks about a specific doctor, accept their request. If unknown, document and proceed.
`;
}
